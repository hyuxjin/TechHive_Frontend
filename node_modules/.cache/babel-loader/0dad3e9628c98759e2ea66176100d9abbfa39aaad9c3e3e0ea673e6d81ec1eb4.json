{"ast":null,"code":"import React,{useState,useEffect,useCallback,useRef}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{Button,Dialog,DialogTitle,DialogContent,DialogActions}from\"@mui/material\";import Loadable from'react-loadable';import moment from'moment';import AdNavBar from\"../../components/AdNavBar\";import\"./AdHome.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdComment=Loadable({loader:()=>import('./AdComment'),loading:()=>/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})});const AdHome=()=>{const navigate=useNavigate();const[isOverlayVisible,setOverlayVisible]=useState(false);const[newPostContent,setNewPostContent]=useState(\"\");const[posts,setPosts]=useState([]);const[selectedFile,setSelectedFile]=useState(null);const[imagePreview,setImagePreview]=useState(null);const[currentPostId,setCurrentPostId]=useState(null);const[currentPostOwner,setCurrentPostOwner]=useState(null);const[comments,setComments]=useState([]);const[isCommentDialogOpen,setIsCommentDialogOpen]=useState(false);const[loggedInAdmin,setLoggedInAdmin]=useState(null);const[loggedInSuperUser,setLoggedInSuperUser]=useState(null);const[newComment,setNewComment]=useState('');const[isDeletePostDialogOpen,setIsDeletePostDialogOpen]=useState(false);const[isDeleteCommentDialogOpen,setIsDeleteCommentDialogOpen]=useState(false);const[itemToDelete,setItemToDelete]=useState(null);const[adminProfilePictures,setAdminProfilePictures]=useState({});const[superUserProfilePictures,setSuperUserProfilePictures]=useState({});const defaultProfile='/dp.png';const[showCloseButton,setShowCloseButton]=useState(false);const fileInputRef=useRef(null);useEffect(()=>{const fetchLoggedInAdmin=async()=>{const storedAdmin=JSON.parse(localStorage.getItem(\"loggedInAdmin\"));if(storedAdmin&&storedAdmin.adminname){try{const response=await axios.get(\"http://localhost:8080/admin/getByAdminname?adminname=\".concat(storedAdmin.adminname));const adminData=response.data;if(adminData&&adminData.adminId){setLoggedInAdmin(adminData);console.log(\"Fetched admin data with ID:\",adminData.adminId);}else{console.error(\"Admin data is missing an admin ID.\");}}catch(error){console.error(\"Error fetching admin data:\",error);}}};fetchLoggedInAdmin();},[]);useEffect(()=>{const fetchLoggedInSuperUser=async()=>{const storedSuperUser=JSON.parse(localStorage.getItem(\"loggedInSuperUser\"));if(storedSuperUser&&storedSuperUser.superusername){try{const response=await axios.get(\"http://localhost:8080/superuser/getBySuperUsername?superusername=\".concat(storedSuperUser.superusername));setLoggedInSuperUser(response.data);console.log(\"Fetched superuser data:\",response.data);}catch(error){console.error(\"Error fetching superuser data:\",error);}}};fetchLoggedInSuperUser();},[]);const fetchAdminProfilePicture=useCallback(async adminId=>{try{const response=await fetch(\"http://localhost:8080/admin/profile/getProfilePicture/\".concat(adminId));if(response.ok){const imageBlob=await response.blob();const imageUrl=URL.createObjectURL(imageBlob);setAdminProfilePictures(prev=>({...prev,[adminId]:imageUrl}));}else{setAdminProfilePictures(prev=>({...prev,[adminId]:defaultProfile}));}}catch(error){console.error('Failed to fetch admin profile picture:',error);setAdminProfilePictures(prev=>({...prev,[adminId]:defaultProfile}));}},[]);const fetchSuperUserProfilePicture=useCallback(async superuserId=>{try{const response=await fetch(\"http://localhost:8080/superuser/profile/getProfilePicture/\".concat(superuserId));if(response.ok){const imageBlob=await response.blob();const imageUrl=URL.createObjectURL(imageBlob);setSuperUserProfilePictures(prev=>({...prev,[superuserId]:imageUrl}));}else{setSuperUserProfilePictures(prev=>({...prev,[superuserId]:defaultProfile}));}}catch(error){console.error('Failed to fetch superuser profile picture:',error);setSuperUserProfilePictures(prev=>({...prev,[superuserId]:defaultProfile}));}},[]);useEffect(()=>{if(loggedInAdmin&&loggedInAdmin.adminId){fetchAdminProfilePicture(loggedInAdmin.adminId);}else{console.error(\"Admin ID is not provided!\");}},[loggedInAdmin,fetchAdminProfilePicture]);useEffect(()=>{const fetchPostsAndPictures=async()=>{try{const response=await axios.get(\"http://localhost:8080/posts\");const sortedPosts=response.data.sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp));setPosts(sortedPosts);const adminIds=new Set();const superUserIds=new Set();sortedPosts.forEach(post=>{if(post.adminId){adminIds.add(post.adminId);}if(post.superuserId){superUserIds.add(post.superuserId);}});adminIds.forEach(adminId=>fetchAdminProfilePicture(adminId));superUserIds.forEach(superuserId=>fetchSuperUserProfilePicture(superuserId));}catch(error){console.error(\"Error fetching posts:\",error);}};fetchPostsAndPictures();},[fetchAdminProfilePicture,fetchSuperUserProfilePicture]);const handlePostInputChange=e=>{const content=e.target.value;setNewPostContent(content);setShowCloseButton(content.length>0||imagePreview!==null);};const handleFileChange=event=>{const file=event.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{setImagePreview(reader.result);setShowCloseButton(true);};reader.readAsDataURL(file);}};const handleMicClick=()=>{if(!(\"webkitSpeechRecognition\"in window))return;const recognition=new window.webkitSpeechRecognition();recognition.continuous=false;recognition.interimResults=false;recognition.lang=\"en-US\";recognition.onresult=event=>{const transcript=event.results[0][0].transcript;setNewPostContent(prevContent=>prevContent+\" \"+transcript);};recognition.onerror=event=>{console.log(\"Speech recognition error:\",event.error);};recognition.start();};const handlePostSubmit=async e=>{e.preventDefault();if(!newPostContent&&!imagePreview){alert(\"Please enter a post or select a picture before submitting.\");return;}if(!loggedInAdmin){alert(\"Please log in to post.\");return;}const newPost={content:newPostContent,image:imagePreview,adminId:loggedInAdmin.adminId,fullName:loggedInAdmin.fullName,idNumber:loggedInAdmin.idNumber,isVerified:false,likes:0,dislikes:0};try{const response=await axios.post(\"http://localhost:8080/posts/add\",newPost,{headers:{'Content-Type':'application/json'}});setPosts(prevPosts=>[response.data,...prevPosts]);setNewPostContent(\"\");setSelectedFile(null);setImagePreview(null);setShowCloseButton(false);}catch(error){console.error(\"Error posting data:\",error);}};const handleLike=async postId=>{if(!loggedInAdmin&&!loggedInSuperUser){alert(\"Please log in to like posts.\");return;}try{const response=await axios.post(\"http://localhost:8080/posts/\".concat(postId,\"/like\"),{},{params:{userId:loggedInAdmin?loggedInAdmin.adminId:loggedInSuperUser.superuserId,isAdmin:!!loggedInAdmin}});const updatedPost=response.data;setPosts(posts.map(post=>post.postId===postId?updatedPost:post));}catch(error){console.error(\"Error liking post:\",error);}};const handleDislike=async postId=>{if(!loggedInAdmin&&!loggedInSuperUser){alert(\"Please log in to dislike posts.\");return;}try{const response=await axios.post(\"http://localhost:8080/posts/\".concat(postId,\"/dislike\"),{},{params:{userId:loggedInAdmin?loggedInAdmin.adminId:loggedInSuperUser.superuserId,isAdmin:!!loggedInAdmin}});const updatedPost=response.data;setPosts(posts.map(post=>post.postId===postId?updatedPost:post));}catch(error){console.error(\"Error disliking post:\",error);}};const handleOpenComments=async postId=>{setCurrentPostId(postId);try{const[commentsResponse,postResponse]=await Promise.all([axios.get(\"http://localhost:8080/comments/\".concat(postId)),axios.get(\"http://localhost:8080/posts/\".concat(postId))]);const sortedComments=commentsResponse.data.sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp)).map(comment=>({...comment,relativeTime:moment(comment.timestamp).fromNow()}));setComments(sortedComments);setCurrentPostOwner(postResponse.data.adminId);}catch(error){console.error(\"Error fetching comments or post details:\",error);}setIsCommentDialogOpen(true);};const handleCloseComments=()=>{setIsCommentDialogOpen(false);setCurrentPostId(null);};const handleAddComment=async()=>{if(newComment.trim()==='')return;const comment={content:newComment,postId:currentPostId,adminId:loggedInAdmin.adminId,fullName:loggedInAdmin.fullName,idNumber:loggedInAdmin.idNumber};try{const response=await axios.post('http://localhost:8080/comments/add',comment);const newCommentWithRelativeTime={...response.data,relativeTime:moment(response.data.timestamp).fromNow()};setComments(prevComments=>[newCommentWithRelativeTime,...prevComments]);setNewComment('');}catch(error){console.error(\"Error adding comment:\",error);}};const handleDeletePost=postId=>{if(!loggedInAdmin){alert(\"Please log in to delete posts.\");return;}setItemToDelete(postId);setIsDeletePostDialogOpen(true);};const handleDeleteComment=(commentId,commentAdminId)=>{if(!loggedInAdmin){alert(\"Please log in to delete comments.\");return;}if(loggedInAdmin.adminId===commentAdminId||loggedInAdmin.adminId===currentPostOwner){setItemToDelete(commentId);setIsDeleteCommentDialogOpen(true);}else{alert(\"You don't have permission to delete this comment.\");}};const confirmDeletePost=async()=>{try{await axios.delete(\"http://localhost:8080/posts/\".concat(itemToDelete));setPosts(posts.filter(post=>post.postId!==itemToDelete));setIsDeletePostDialogOpen(false);}catch(error){console.error(\"Error deleting post:\",error);}};const confirmDeleteComment=async()=>{try{await axios.delete(\"http://localhost:8080/comments/\".concat(itemToDelete),{params:{adminId:loggedInAdmin.adminId}});setComments(comments.filter(comment=>comment.commentId!==itemToDelete));setIsDeleteCommentDialogOpen(false);}catch(error){console.error(\"Error deleting comment:\",error);alert(\"Failed to delete comment. You may not have permission.\");}};const formatTimestamp=timestamp=>{const momentDate=moment(timestamp);return momentDate.format('dddd, MMMM D, YYYY [at] h:mm A');};const getRelativeTime=timestamp=>{return moment(timestamp).fromNow();};const handleClosePost=()=>{setNewPostContent('');setImagePreview(null);setShowCloseButton(false);if(fileInputRef.current){fileInputRef.current.value='';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"adhome\",children:[/*#__PURE__*/_jsx(AdNavBar,{}),/*#__PURE__*/_jsx(\"b\",{className:\"HWildcat\",children:\"WILDCAT\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post-form\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePostSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"post-input\",value:newPostContent,onChange:handlePostInputChange,placeholder:\"What's happening in your day, Wildcat?\"}),showCloseButton&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close-button\",onClick:handleClosePost,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-subcontainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-subcontainer-icons\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file-upload\",children:/*#__PURE__*/_jsx(\"img\",{className:\"gallery-icon\",alt:\"\",src:\"/gallery.png\"})}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,id:\"file-upload\",type:\"file\",className:\"file-input\",style:{display:\"none\"},onChange:handleFileChange,onClick:e=>{e.target.value=null;}}),/*#__PURE__*/_jsx(\"img\",{className:\"mic-icon\",alt:\"Mic\",src:\"/mic.png\",onClick:handleMicClick,style:{cursor:\"pointer\"}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"post-button\",variant:\"contained\",sx:{borderRadius:\"10px\",width:60,height:30,backgroundColor:\"#8A252C\",\"&:hover\":{backgroundColor:\"#A91D3A\"}},children:\"POST\"})]})]}),imagePreview&&/*#__PURE__*/_jsx(\"div\",{className:\"image-preview\",children:/*#__PURE__*/_jsx(\"img\",{src:imagePreview,alt:\"Preview\",style:{width:'100px',height:'100px'}})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"post-list\",children:posts.map(post=>/*#__PURE__*/_jsx(\"div\",{className:\"post-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:post.adminId?adminProfilePictures[post.adminId]||defaultProfile:superUserProfilePictures[post.superuserId]||defaultProfile,alt:\"Profile Avatar\",className:\"admins-dp\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"name-container\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[post.fullName,\" (\",post.idNumber,\")\"]}),loggedInAdmin&&loggedInAdmin.adminId===post.adminId&&/*#__PURE__*/_jsx(\"img\",{src:\"/delete.png\",alt:\"Delete\",className:\"delete-icon\",onClick:()=>handleDeletePost(post.postId),style:{cursor:'pointer',width:'20px',height:'20px',marginLeft:'auto'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timestamp\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"formatted-date\",children:formatTimestamp(post.timestamp)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"relative-time\",children:getRelativeTime(post.timestamp)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-contents\",children:[/*#__PURE__*/_jsx(\"p\",{children:post.content}),post.image&&/*#__PURE__*/_jsx(\"img\",{className:\"post-image\",alt:\"Post\",src:post.image,style:{maxWidth:'100%',height:'auto'}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-icons\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLike(post.postId),className:\"like-button \".concat(post.likedBy&&post.likedBy.includes(loggedInAdmin===null||loggedInAdmin===void 0?void 0:loggedInAdmin.adminId)?'active':''),children:[/*#__PURE__*/_jsx(\"img\",{src:\"/t-up.png\",alt:\"Thumbs Up\"}),\" \",post.likes]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDislike(post.postId),className:\"dislike-button \".concat(post.dislikedBy&&post.dislikedBy.includes(loggedInAdmin===null||loggedInAdmin===void 0?void 0:loggedInAdmin.adminId)?'active':''),children:[/*#__PURE__*/_jsx(\"img\",{src:\"/t-down.png\",alt:\"Thumbs Down\"}),\" \",post.dislikes]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-comments\",children:/*#__PURE__*/_jsx(\"button\",{className:\"comment-button\",onClick:()=>handleOpenComments(post.postId),children:\"Comment\"})})]})]})},post.postId))})]}),/*#__PURE__*/_jsxs(Dialog,{open:isCommentDialogOpen,onClose:handleCloseComments,children:[/*#__PURE__*/_jsxs(DialogTitle,{children:[\"Comments\",/*#__PURE__*/_jsx(\"img\",{src:\"/exit.png\",alt:\"Close\",className:\"exit-icon\",onClick:handleCloseComments})]}),/*#__PURE__*/_jsx(DialogContent,{children:comments.map(comment=>/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-info-container\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"admin-info\",children:[comment.fullName,\" (\",comment.idNumber,\")\"]}),loggedInAdmin&&(loggedInAdmin.adminId===comment.adminId||loggedInAdmin.adminId===currentPostOwner)&&/*#__PURE__*/_jsx(\"img\",{src:\"/delete.png\",alt:\"Delete\",className:\"delete-icon\",onClick:()=>handleDeleteComment(comment.commentId,comment.adminId)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timestamp-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"formatted-time\",children:formatTimestamp(comment.timestamp)}),/*#__PURE__*/_jsx(\"span\",{className:\"relative-time\",children:comment.relativeTime})]})]}),/*#__PURE__*/_jsx(\"p\",{children:comment.content})]},comment.commentId))}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"add-comment\",style:{display:'flex',width:'100%',padding:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:\"Add a comment...\",style:{flexGrow:1,marginRight:'10px',padding:'8px',border:'1px solid #ccc',borderRadius:'4px'}}),/*#__PURE__*/_jsx(Button,{onClick:handleAddComment,variant:\"contained\",sx:{backgroundColor:'#8A252C',color:'white','&:hover':{backgroundColor:'#f9d67b',color:'black'},transition:'all 0.3s ease'},children:\"Comment\"})]})})]}),/*#__PURE__*/_jsxs(Dialog,{open:isDeletePostDialogOpen,onClose:()=>setIsDeletePostDialogOpen(false),children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Confirm Delete\"}),/*#__PURE__*/_jsx(DialogContent,{children:\"Are you sure you want to delete this post?\"}),/*#__PURE__*/_jsxs(DialogActions,{className:\"delete-dialog-actions\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setIsDeletePostDialogOpen(false),className:\"cancel-button\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:confirmDeletePost,className:\"delete-button\",children:\"Delete\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:isDeleteCommentDialogOpen,onClose:()=>setIsDeleteCommentDialogOpen(false),children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Confirm Delete\"}),/*#__PURE__*/_jsx(DialogContent,{children:\"Are you sure you want to delete this comment?\"}),/*#__PURE__*/_jsxs(DialogActions,{className:\"delete-dialog-actions\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setIsDeleteCommentDialogOpen(false),className:\"cancel-button\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:confirmDeleteComment,className:\"delete-button\",children:\"Delete\"})]})]})]});};export default AdHome;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","axios","useNavigate","Button","Dialog","DialogTitle","DialogContent","DialogActions","Loadable","moment","AdNavBar","jsx","_jsx","jsxs","_jsxs","AdComment","loader","loading","children","AdHome","navigate","isOverlayVisible","setOverlayVisible","newPostContent","setNewPostContent","posts","setPosts","selectedFile","setSelectedFile","imagePreview","setImagePreview","currentPostId","setCurrentPostId","currentPostOwner","setCurrentPostOwner","comments","setComments","isCommentDialogOpen","setIsCommentDialogOpen","loggedInAdmin","setLoggedInAdmin","loggedInSuperUser","setLoggedInSuperUser","newComment","setNewComment","isDeletePostDialogOpen","setIsDeletePostDialogOpen","isDeleteCommentDialogOpen","setIsDeleteCommentDialogOpen","itemToDelete","setItemToDelete","adminProfilePictures","setAdminProfilePictures","superUserProfilePictures","setSuperUserProfilePictures","defaultProfile","showCloseButton","setShowCloseButton","fileInputRef","fetchLoggedInAdmin","storedAdmin","JSON","parse","localStorage","getItem","adminname","response","get","concat","adminData","data","adminId","console","log","error","fetchLoggedInSuperUser","storedSuperUser","superusername","fetchAdminProfilePicture","fetch","ok","imageBlob","blob","imageUrl","URL","createObjectURL","prev","fetchSuperUserProfilePicture","superuserId","fetchPostsAndPictures","sortedPosts","sort","a","b","Date","timestamp","adminIds","Set","superUserIds","forEach","post","add","handlePostInputChange","e","content","target","value","length","handleFileChange","event","file","files","reader","FileReader","onloadend","result","readAsDataURL","handleMicClick","window","recognition","webkitSpeechRecognition","continuous","interimResults","lang","onresult","transcript","results","prevContent","onerror","start","handlePostSubmit","preventDefault","alert","newPost","image","fullName","idNumber","isVerified","likes","dislikes","headers","prevPosts","handleLike","postId","params","userId","isAdmin","updatedPost","map","handleDislike","handleOpenComments","commentsResponse","postResponse","Promise","all","sortedComments","comment","relativeTime","fromNow","handleCloseComments","handleAddComment","trim","newCommentWithRelativeTime","prevComments","handleDeletePost","handleDeleteComment","commentId","commentAdminId","confirmDeletePost","delete","filter","confirmDeleteComment","formatTimestamp","momentDate","format","getRelativeTime","handleClosePost","current","className","onSubmit","type","onChange","placeholder","onClick","htmlFor","alt","src","ref","id","style","display","cursor","variant","sx","borderRadius","width","height","backgroundColor","marginLeft","maxWidth","likedBy","includes","dislikedBy","open","onClose","padding","flexGrow","marginRight","border","color","transition"],"sources":["/Users/richardmolina/Documents/GitHub/ADMIN_TECHHIVE_FRONTEND/src/admin pages/ADHome/AdHome.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Button, Dialog, DialogTitle, DialogContent, DialogActions } from \"@mui/material\";\r\nimport Loadable from 'react-loadable';\r\nimport moment from 'moment';\r\nimport AdNavBar from \"../../components/AdNavBar\";\r\nimport \"./AdHome.css\";\r\n\r\nconst AdComment = Loadable({\r\n  loader: () => import('./AdComment'),\r\n  loading: () => <div>Loading...</div>,\r\n});\r\n\r\nconst AdHome = () => {\r\n  const navigate = useNavigate();\r\n  const [isOverlayVisible, setOverlayVisible] = useState(false);\r\n  const [newPostContent, setNewPostContent] = useState(\"\");\r\n  const [posts, setPosts] = useState([]);\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [currentPostId, setCurrentPostId] = useState(null);\r\n  const [currentPostOwner, setCurrentPostOwner] = useState(null);\r\n  const [comments, setComments] = useState([]);\r\n  const [isCommentDialogOpen, setIsCommentDialogOpen] = useState(false);\r\n  const [loggedInAdmin, setLoggedInAdmin] = useState(null);\r\n  const [loggedInSuperUser, setLoggedInSuperUser] = useState(null);\r\n  const [newComment, setNewComment] = useState('');\r\n  const [isDeletePostDialogOpen, setIsDeletePostDialogOpen] = useState(false);\r\n  const [isDeleteCommentDialogOpen, setIsDeleteCommentDialogOpen] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [adminProfilePictures, setAdminProfilePictures] = useState({});\r\n  const [superUserProfilePictures, setSuperUserProfilePictures] = useState({});\r\n  const defaultProfile = '/dp.png';\r\n  const [showCloseButton, setShowCloseButton] = useState(false);\r\n\r\n  const fileInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const fetchLoggedInAdmin = async () => {\r\n        const storedAdmin = JSON.parse(localStorage.getItem(\"loggedInAdmin\"));\r\n        if (storedAdmin && storedAdmin.adminname) {\r\n            try {\r\n                const response = await axios.get(`http://localhost:8080/admin/getByAdminname?adminname=${storedAdmin.adminname}`);\r\n                const adminData = response.data;\r\n\r\n                if (adminData && adminData.adminId) {\r\n                    setLoggedInAdmin(adminData);\r\n                    console.log(\"Fetched admin data with ID:\", adminData.adminId);\r\n                } else {\r\n                    console.error(\"Admin data is missing an admin ID.\");\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching admin data:\", error);\r\n            }\r\n        }\r\n    };\r\n    fetchLoggedInAdmin();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchLoggedInSuperUser = async () => {\r\n      const storedSuperUser = JSON.parse(localStorage.getItem(\"loggedInSuperUser\"));\r\n      if (storedSuperUser && storedSuperUser.superusername) {\r\n        try {\r\n          const response = await axios.get(`http://localhost:8080/superuser/getBySuperUsername?superusername=${storedSuperUser.superusername}`);\r\n          setLoggedInSuperUser(response.data);\r\n          console.log(\"Fetched superuser data:\", response.data);\r\n        } catch (error) {\r\n          console.error(\"Error fetching superuser data:\", error);\r\n        }\r\n      }\r\n    };\r\n    fetchLoggedInSuperUser();\r\n  }, []);\r\n\r\n  const fetchAdminProfilePicture = useCallback(async (adminId) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:8080/admin/profile/getProfilePicture/${adminId}`);\r\n      if (response.ok) {\r\n        const imageBlob = await response.blob();\r\n        const imageUrl = URL.createObjectURL(imageBlob);\r\n        setAdminProfilePictures(prev => ({ ...prev, [adminId]: imageUrl }));\r\n      } else {\r\n        setAdminProfilePictures(prev => ({ ...prev, [adminId]: defaultProfile }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch admin profile picture:', error);\r\n      setAdminProfilePictures(prev => ({ ...prev, [adminId]: defaultProfile }));\r\n    }\r\n  }, []);\r\n\r\n  const fetchSuperUserProfilePicture = useCallback(async (superuserId) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:8080/superuser/profile/getProfilePicture/${superuserId}`);\r\n      if (response.ok) {\r\n        const imageBlob = await response.blob();\r\n        const imageUrl = URL.createObjectURL(imageBlob);\r\n        setSuperUserProfilePictures(prev => ({ ...prev, [superuserId]: imageUrl }));\r\n      } else {\r\n        setSuperUserProfilePictures(prev => ({ ...prev, [superuserId]: defaultProfile }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch superuser profile picture:', error);\r\n      setSuperUserProfilePictures(prev => ({ ...prev, [superuserId]: defaultProfile }));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (loggedInAdmin && loggedInAdmin.adminId) {\r\n      fetchAdminProfilePicture(loggedInAdmin.adminId);\r\n    } else {\r\n      console.error(\"Admin ID is not provided!\");\r\n    }\r\n  }, [loggedInAdmin, fetchAdminProfilePicture]);\r\n\r\n  useEffect(() => {\r\n    const fetchPostsAndPictures = async () => {\r\n      try {\r\n        const response = await axios.get(\"http://localhost:8080/posts\");\r\n        const sortedPosts = response.data.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));\r\n        setPosts(sortedPosts);\r\n\r\n        const adminIds = new Set();\r\n        const superUserIds = new Set();\r\n\r\n        sortedPosts.forEach(post => {\r\n          if (post.adminId) {\r\n            adminIds.add(post.adminId);\r\n          }\r\n          if (post.superuserId) {\r\n            superUserIds.add(post.superuserId);\r\n          }\r\n        });\r\n\r\n        adminIds.forEach(adminId => fetchAdminProfilePicture(adminId));\r\n        superUserIds.forEach(superuserId => fetchSuperUserProfilePicture(superuserId));\r\n      } catch (error) {\r\n        console.error(\"Error fetching posts:\", error);\r\n      }\r\n    };\r\n\r\n    fetchPostsAndPictures();\r\n  }, [fetchAdminProfilePicture, fetchSuperUserProfilePicture]);\r\n\r\n  const handlePostInputChange = (e) => {\r\n    const content = e.target.value;\r\n    setNewPostContent(content);\r\n    setShowCloseButton(content.length > 0 || imagePreview !== null);\r\n  };\r\n\r\n  const handleFileChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setImagePreview(reader.result);\r\n        setShowCloseButton(true);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleMicClick = () => {\r\n    if (!(\"webkitSpeechRecognition\" in window)) return;\r\n    const recognition = new window.webkitSpeechRecognition();\r\n    recognition.continuous = false;\r\n    recognition.interimResults = false;\r\n    recognition.lang = \"en-US\";\r\n    recognition.onresult = (event) => {\r\n      const transcript = event.results[0][0].transcript;\r\n      setNewPostContent((prevContent) => prevContent + \" \" + transcript);\r\n    };\r\n    recognition.onerror = (event) => {\r\n      console.log(\"Speech recognition error:\", event.error);\r\n    };\r\n    recognition.start();\r\n  };\r\n\r\n  const handlePostSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!newPostContent && !imagePreview) {\r\n      alert(\"Please enter a post or select a picture before submitting.\");\r\n      return;\r\n    }\r\n\r\n    if (!loggedInAdmin) {\r\n      alert(\"Please log in to post.\");\r\n      return;\r\n    }\r\n\r\n    const newPost = {\r\n      content: newPostContent,\r\n      image: imagePreview,\r\n      adminId: loggedInAdmin.adminId,\r\n      fullName: loggedInAdmin.fullName,\r\n      idNumber: loggedInAdmin.idNumber,\r\n      isVerified: false,\r\n      likes: 0,\r\n      dislikes: 0,\r\n    };\r\n\r\n    try {\r\n      const response = await axios.post(\"http://localhost:8080/posts/add\", newPost, {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      setPosts(prevPosts => [response.data, ...prevPosts]);\r\n      setNewPostContent(\"\");\r\n      setSelectedFile(null);\r\n      setImagePreview(null);\r\n      setShowCloseButton(false);\r\n    } catch (error) {\r\n      console.error(\"Error posting data:\", error);\r\n    }\r\n  };\r\n\r\n  const handleLike = async (postId) => {\r\n    if (!loggedInAdmin && !loggedInSuperUser) {\r\n      alert(\"Please log in to like posts.\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.post(`http://localhost:8080/posts/${postId}/like`, {}, {\r\n        params: {\r\n          userId: loggedInAdmin ? loggedInAdmin.adminId : loggedInSuperUser.superuserId,\r\n          isAdmin: !!loggedInAdmin\r\n        }\r\n      });\r\n      const updatedPost = response.data;\r\n      setPosts(posts.map(post =>\r\n        post.postId === postId ? updatedPost : post\r\n      ));\r\n    } catch (error) {\r\n      console.error(\"Error liking post:\", error);\r\n    }\r\n  };\r\n\r\n  const handleDislike = async (postId) => {\r\n    if (!loggedInAdmin && !loggedInSuperUser) {\r\n      alert(\"Please log in to dislike posts.\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.post(`http://localhost:8080/posts/${postId}/dislike`, {}, {\r\n        params: {\r\n          userId: loggedInAdmin ? loggedInAdmin.adminId : loggedInSuperUser.superuserId,\r\n          isAdmin: !!loggedInAdmin\r\n        }\r\n      });\r\n      const updatedPost = response.data;\r\n      setPosts(posts.map(post =>\r\n        post.postId === postId ? updatedPost : post\r\n      ));\r\n    } catch (error) {\r\n      console.error(\"Error disliking post:\", error);\r\n    }\r\n  };\r\n\r\n  const handleOpenComments = async (postId) => {\r\n    setCurrentPostId(postId);\r\n    try {\r\n      const [commentsResponse, postResponse] = await Promise.all([\r\n        axios.get(`http://localhost:8080/comments/${postId}`),\r\n        axios.get(`http://localhost:8080/posts/${postId}`)\r\n      ]);\r\n      const sortedComments = commentsResponse.data\r\n        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))\r\n        .map(comment => ({\r\n          ...comment,\r\n          relativeTime: moment(comment.timestamp).fromNow()\r\n        }));\r\n      setComments(sortedComments);\r\n      setCurrentPostOwner(postResponse.data.adminId);\r\n    } catch (error) {\r\n      console.error(\"Error fetching comments or post details:\", error);\r\n    }\r\n    setIsCommentDialogOpen(true);\r\n  };\r\n\r\n  const handleCloseComments = () => {\r\n    setIsCommentDialogOpen(false);\r\n    setCurrentPostId(null);\r\n  };\r\n\r\n  const handleAddComment = async () => {\r\n    if (newComment.trim() === '') return;\r\n\r\n    const comment = {\r\n      content: newComment,\r\n      postId: currentPostId,\r\n      adminId: loggedInAdmin.adminId,\r\n      fullName: loggedInAdmin.fullName,\r\n      idNumber: loggedInAdmin.idNumber,\r\n    };\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:8080/comments/add', comment);\r\n      const newCommentWithRelativeTime = {\r\n        ...response.data,\r\n        relativeTime: moment(response.data.timestamp).fromNow()\r\n      };\r\n      setComments(prevComments => [newCommentWithRelativeTime, ...prevComments]);\r\n      setNewComment('');\r\n    } catch (error) {\r\n      console.error(\"Error adding comment:\", error);\r\n    }\r\n  };\r\n\r\n  const handleDeletePost = (postId) => {\r\n    if (!loggedInAdmin) {\r\n      alert(\"Please log in to delete posts.\");\r\n      return;\r\n    }\r\n    setItemToDelete(postId);\r\n    setIsDeletePostDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteComment = (commentId, commentAdminId) => {\r\n    if (!loggedInAdmin) {\r\n      alert(\"Please log in to delete comments.\");\r\n      return;\r\n    }\r\n    if (loggedInAdmin.adminId === commentAdminId || loggedInAdmin.adminId === currentPostOwner) {\r\n      setItemToDelete(commentId);\r\n      setIsDeleteCommentDialogOpen(true);\r\n    } else {\r\n      alert(\"You don't have permission to delete this comment.\");\r\n    }\r\n  };\r\n\r\n  const confirmDeletePost = async () => {\r\n    try {\r\n      await axios.delete(`http://localhost:8080/posts/${itemToDelete}`);\r\n      setPosts(posts.filter(post => post.postId !== itemToDelete));\r\n      setIsDeletePostDialogOpen(false);\r\n    } catch (error) {\r\n      console.error(\"Error deleting post:\", error);\r\n    }\r\n  };\r\n\r\n  const confirmDeleteComment = async () => {\r\n    try {\r\n      await axios.delete(`http://localhost:8080/comments/${itemToDelete}`, {\r\n        params: {\r\n          adminId: loggedInAdmin.adminId\r\n        }\r\n      });\r\n      setComments(comments.filter(comment => comment.commentId !== itemToDelete));\r\n      setIsDeleteCommentDialogOpen(false);\r\n    } catch (error) {\r\n      console.error(\"Error deleting comment:\", error);\r\n      alert(\"Failed to delete comment. You may not have permission.\");\r\n    }\r\n  };\r\n\r\n  const formatTimestamp = (timestamp) => {\r\n    const momentDate = moment(timestamp);\r\n    return momentDate.format('dddd, MMMM D, YYYY [at] h:mm A');\r\n  };\r\n\r\n  const getRelativeTime = (timestamp) => {\r\n    return moment(timestamp).fromNow();\r\n  };\r\n\r\n  const handleClosePost = () => {\r\n    setNewPostContent('');\r\n    setImagePreview(null);\r\n    setShowCloseButton(false);\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"adhome\">\r\n      <AdNavBar />  \r\n      <b className=\"HWildcat\">WILDCAT</b>\r\n\r\n      <div className=\"content-wrapper\">\r\n        <div className=\"post-container\">\r\n          <div className=\"post-form\">\r\n            <form onSubmit={handlePostSubmit}>\r\n              <div className=\"input-container\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"post-input\"\r\n                  value={newPostContent}\r\n                  onChange={handlePostInputChange}\r\n                  placeholder=\"What's happening in your day, Wildcat?\"\r\n                />\r\n                {showCloseButton && (\r\n                  <button type=\"button\" className=\"close-button\" onClick={handleClosePost}>\r\n                    Ã—\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"post-subcontainer\">\r\n                <div className=\"post-subcontainer-icons\">\r\n                  <label htmlFor=\"file-upload\">\r\n                    <img className=\"gallery-icon\" alt=\"\" src=\"/gallery.png\" />\r\n                  </label>\r\n                  <input\r\n                    ref={fileInputRef}\r\n                    id=\"file-upload\"\r\n                    type=\"file\"\r\n                    className=\"file-input\"\r\n                    style={{ display: \"none\" }}\r\n                    onChange={handleFileChange}\r\n                    onClick={(e) => { e.target.value = null }}\r\n                  />\r\n                  <img\r\n                    className=\"mic-icon\"\r\n                    alt=\"Mic\"\r\n                    src=\"/mic.png\"\r\n                    onClick={handleMicClick}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  />\r\n                </div>\r\n                <Button\r\n                  type=\"submit\"\r\n                  className=\"post-button\"\r\n                  variant=\"contained\"\r\n                  sx={{\r\n                    borderRadius: \"10px\",\r\n                    width: 60,\r\n                    height: 30,\r\n                    backgroundColor: \"#8A252C\",\r\n                    \"&:hover\": { backgroundColor: \"#A91D3A\" }\r\n                  }}\r\n                >\r\n                  POST\r\n                </Button>\r\n              </div>\r\n            </form>\r\n            {imagePreview && (\r\n              <div className=\"image-preview\">\r\n                <img src={imagePreview} alt=\"Preview\" style={{ width: '100px', height: '100px' }} />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"post-list\">\r\n          {posts.map((post) => (\r\n            <div key={post.postId} className=\"post-card\">\r\n              <div className=\"card-container\">\r\n                <div className=\"logo-container\">\r\n                  <img\r\n                    src={\r\n                      post.adminId\r\n                        ? adminProfilePictures[post.adminId] || defaultProfile\r\n                        : superUserProfilePictures[post.superuserId] || defaultProfile\r\n                    }\r\n                    alt=\"Profile Avatar\"\r\n                    className=\"admins-dp\"\r\n                  />\r\n                </div>\r\n                <div className=\"name-container\">\r\n                  <h5>{post.fullName} ({post.idNumber})</h5>\r\n                  {loggedInAdmin && loggedInAdmin.adminId === post.adminId && (\r\n                    <img\r\n                      src=\"/delete.png\"\r\n                      alt=\"Delete\"\r\n                      className=\"delete-icon\"\r\n                      onClick={() => handleDeletePost(post.postId)}\r\n                      style={{ cursor: 'pointer', width: '20px', height: '20px', marginLeft: 'auto' }}\r\n                    />\r\n                  )}\r\n                </div>\r\n                <div className=\"timestamp\">\r\n                  <span className=\"formatted-date\">{formatTimestamp(post.timestamp)}</span>\r\n                  <br />\r\n                  <span className=\"relative-time\">{getRelativeTime(post.timestamp)}</span>\r\n                </div>\r\n                <div className=\"card-contents\">\r\n                  <p>{post.content}</p>\r\n                  {post.image && (\r\n                    <img\r\n                      className=\"post-image\"\r\n                      alt=\"Post\"\r\n                      src={post.image}\r\n                      style={{ maxWidth: '100%', height: 'auto' }}\r\n                    />\r\n                  )}\r\n                </div>\r\n                <div className=\"footer-line\" />\r\n                <div className=\"footer-actions\">\r\n                  <div className=\"footer-icons\">\r\n                    <button \r\n                      onClick={() => handleLike(post.postId)} \r\n                      className={`like-button ${post.likedBy && post.likedBy.includes(loggedInAdmin?.adminId) ? 'active' : ''}`}\r\n                    >\r\n                      <img src=\"/t-up.png\" alt=\"Thumbs Up\" /> {post.likes}\r\n                    </button>\r\n                    <button \r\n                      onClick={() => handleDislike(post.postId)} \r\n                      className={`dislike-button ${post.dislikedBy && post.dislikedBy.includes(loggedInAdmin?.adminId) ? 'active' : ''}`}\r\n                    >\r\n                      <img src=\"/t-down.png\" alt=\"Thumbs Down\" /> {post.dislikes}\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"footer-comments\">\r\n                    <button className=\"comment-button\" onClick={() => handleOpenComments(post.postId)}>Comment</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <Dialog open={isCommentDialogOpen} onClose={handleCloseComments}>\r\n        <DialogTitle>\r\n          Comments\r\n          <img\r\n            src=\"/exit.png\"\r\n            alt=\"Close\"\r\n            className=\"exit-icon\"\r\n            onClick={handleCloseComments}\r\n          />\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {comments.map((comment) => (\r\n            <div key={comment.commentId} className=\"comment\">\r\n              <div className=\"comment-header\">\r\n                <div className=\"admin-info-container\">\r\n                  <span className=\"admin-info\">\r\n                    {comment.fullName} ({comment.idNumber})\r\n                  </span>\r\n                  {(loggedInAdmin && (loggedInAdmin.adminId === comment.adminId || loggedInAdmin.adminId === currentPostOwner)) && (\r\n                    <img\r\n                      src=\"/delete.png\"\r\n                      alt=\"Delete\"\r\n                      className=\"delete-icon\"\r\n                      onClick={() => handleDeleteComment(comment.commentId, comment.adminId)}\r\n                    />\r\n                  )}\r\n                </div>\r\n                <div className=\"timestamp-container\">\r\n                  <span className=\"formatted-time\">\r\n                    {formatTimestamp(comment.timestamp)}\r\n                  </span>\r\n                  <span className=\"relative-time\">\r\n                    {comment.relativeTime}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <p>{comment.content}</p>\r\n            </div>\r\n          ))}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <div className=\"add-comment\" style={{ display: 'flex', width: '100%', padding: '10px' }}>\r\n            <input\r\n              type=\"text\"\r\n              value={newComment}\r\n              onChange={(e) => setNewComment(e.target.value)}\r\n              placeholder=\"Add a comment...\"\r\n              style={{ \r\n                flexGrow: 1, \r\n                marginRight: '10px', \r\n                padding: '8px', \r\n                border: '1px solid #ccc', \r\n                borderRadius: '4px' \r\n              }}\r\n            />\r\n            <Button \r\n              onClick={handleAddComment}\r\n              variant=\"contained\"\r\n              sx={{ \r\n                backgroundColor: '#8A252C', \r\n                color: 'white',\r\n                '&:hover': {\r\n                  backgroundColor: '#f9d67b',\r\n                  color: 'black'\r\n                },\r\n                transition: 'all 0.3s ease'\r\n              }}\r\n            >\r\n              Comment\r\n            </Button>\r\n          </div>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog open={isDeletePostDialogOpen} onClose={() => setIsDeletePostDialogOpen(false)}>\r\n        <DialogTitle>Confirm Delete</DialogTitle>\r\n        <DialogContent>\r\n          Are you sure you want to delete this post?\r\n        </DialogContent>\r\n        <DialogActions className=\"delete-dialog-actions\">\r\n          <Button onClick={() => setIsDeletePostDialogOpen(false)} className=\"cancel-button\">Cancel</Button>\r\n          <Button onClick={confirmDeletePost} className=\"delete-button\">Delete</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog open={isDeleteCommentDialogOpen} onClose={() => setIsDeleteCommentDialogOpen(false)}>\r\n        <DialogTitle>Confirm Delete</DialogTitle>\r\n        <DialogContent>\r\n          Are you sure you want to delete this comment?\r\n        </DialogContent>\r\n        <DialogActions className=\"delete-dialog-actions\">\r\n          <Button onClick={() => setIsDeleteCommentDialogOpen(false)} className=\"cancel-button\">Cancel</Button>\r\n          <Button onClick={confirmDeleteComment} className=\"delete-button\">Delete</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdHome;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,CAAEC,MAAM,KAAQ,OAAO,CACvE,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,MAAM,CAAEC,MAAM,CAAEC,WAAW,CAAEC,aAAa,CAAEC,aAAa,KAAQ,eAAe,CACzF,MAAO,CAAAC,QAAQ,KAAM,gBAAgB,CACrC,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAC3B,MAAO,CAAAC,QAAQ,KAAM,2BAA2B,CAChD,MAAO,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtB,KAAM,CAAAC,SAAS,CAAGP,QAAQ,CAAC,CACzBQ,MAAM,CAAEA,CAAA,GAAM,MAAM,CAAC,aAAa,CAAC,CACnCC,OAAO,CAAEA,CAAA,gBAAML,IAAA,QAAAM,QAAA,CAAK,YAAU,CAAK,CACrC,CAAC,CAAC,CAEF,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAAC,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACmB,gBAAgB,CAAEC,iBAAiB,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAC0B,cAAc,CAAEC,iBAAiB,CAAC,CAAG3B,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAAC4B,KAAK,CAAEC,QAAQ,CAAC,CAAG7B,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC8B,YAAY,CAAEC,eAAe,CAAC,CAAG/B,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACgC,YAAY,CAAEC,eAAe,CAAC,CAAGjC,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACkC,aAAa,CAAEC,gBAAgB,CAAC,CAAGnC,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACoC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGrC,QAAQ,CAAC,IAAI,CAAC,CAC9D,KAAM,CAACsC,QAAQ,CAAEC,WAAW,CAAC,CAAGvC,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACwC,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGzC,QAAQ,CAAC,KAAK,CAAC,CACrE,KAAM,CAAC0C,aAAa,CAAEC,gBAAgB,CAAC,CAAG3C,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAAC4C,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG7C,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAAC8C,UAAU,CAAEC,aAAa,CAAC,CAAG/C,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACgD,sBAAsB,CAAEC,yBAAyB,CAAC,CAAGjD,QAAQ,CAAC,KAAK,CAAC,CAC3E,KAAM,CAACkD,yBAAyB,CAAEC,4BAA4B,CAAC,CAAGnD,QAAQ,CAAC,KAAK,CAAC,CACjF,KAAM,CAACoD,YAAY,CAAEC,eAAe,CAAC,CAAGrD,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACsD,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGvD,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpE,KAAM,CAACwD,wBAAwB,CAAEC,2BAA2B,CAAC,CAAGzD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC5E,KAAM,CAAA0D,cAAc,CAAG,SAAS,CAChC,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAG5D,QAAQ,CAAC,KAAK,CAAC,CAE7D,KAAM,CAAA6D,YAAY,CAAG1D,MAAM,CAAC,IAAI,CAAC,CAEjCF,SAAS,CAAC,IAAM,CACd,KAAM,CAAA6D,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACnC,KAAM,CAAAC,WAAW,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAAC,CACrE,GAAIJ,WAAW,EAAIA,WAAW,CAACK,SAAS,CAAE,CACtC,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAjE,KAAK,CAACkE,GAAG,yDAAAC,MAAA,CAAyDR,WAAW,CAACK,SAAS,CAAE,CAAC,CACjH,KAAM,CAAAI,SAAS,CAAGH,QAAQ,CAACI,IAAI,CAE/B,GAAID,SAAS,EAAIA,SAAS,CAACE,OAAO,CAAE,CAChC/B,gBAAgB,CAAC6B,SAAS,CAAC,CAC3BG,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEJ,SAAS,CAACE,OAAO,CAAC,CACjE,CAAC,IAAM,CACHC,OAAO,CAACE,KAAK,CAAC,oCAAoC,CAAC,CACvD,CACJ,CAAE,MAAOA,KAAK,CAAE,CACZF,OAAO,CAACE,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACtD,CACJ,CACJ,CAAC,CACDf,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN7D,SAAS,CAAC,IAAM,CACd,KAAM,CAAA6E,sBAAsB,CAAG,KAAAA,CAAA,GAAY,CACzC,KAAM,CAAAC,eAAe,CAAGf,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAC7E,GAAIY,eAAe,EAAIA,eAAe,CAACC,aAAa,CAAE,CACpD,GAAI,CACF,KAAM,CAAAX,QAAQ,CAAG,KAAM,CAAAjE,KAAK,CAACkE,GAAG,qEAAAC,MAAA,CAAqEQ,eAAe,CAACC,aAAa,CAAE,CAAC,CACrInC,oBAAoB,CAACwB,QAAQ,CAACI,IAAI,CAAC,CACnCE,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEP,QAAQ,CAACI,IAAI,CAAC,CACvD,CAAE,MAAOI,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACxD,CACF,CACF,CAAC,CACDC,sBAAsB,CAAC,CAAC,CAC1B,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,wBAAwB,CAAG/E,WAAW,CAAC,KAAO,CAAAwE,OAAO,EAAK,CAC9D,GAAI,CACF,KAAM,CAAAL,QAAQ,CAAG,KAAM,CAAAa,KAAK,0DAAAX,MAAA,CAA0DG,OAAO,CAAE,CAAC,CAChG,GAAIL,QAAQ,CAACc,EAAE,CAAE,CACf,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAf,QAAQ,CAACgB,IAAI,CAAC,CAAC,CACvC,KAAM,CAAAC,QAAQ,CAAGC,GAAG,CAACC,eAAe,CAACJ,SAAS,CAAC,CAC/C7B,uBAAuB,CAACkC,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACf,OAAO,EAAGY,QAAS,CAAC,CAAC,CAAC,CACrE,CAAC,IAAM,CACL/B,uBAAuB,CAACkC,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACf,OAAO,EAAGhB,cAAe,CAAC,CAAC,CAAC,CAC3E,CACF,CAAE,MAAOmB,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,wCAAwC,CAAEA,KAAK,CAAC,CAC9DtB,uBAAuB,CAACkC,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACf,OAAO,EAAGhB,cAAe,CAAC,CAAC,CAAC,CAC3E,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAgC,4BAA4B,CAAGxF,WAAW,CAAC,KAAO,CAAAyF,WAAW,EAAK,CACtE,GAAI,CACF,KAAM,CAAAtB,QAAQ,CAAG,KAAM,CAAAa,KAAK,8DAAAX,MAAA,CAA8DoB,WAAW,CAAE,CAAC,CACxG,GAAItB,QAAQ,CAACc,EAAE,CAAE,CACf,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAf,QAAQ,CAACgB,IAAI,CAAC,CAAC,CACvC,KAAM,CAAAC,QAAQ,CAAGC,GAAG,CAACC,eAAe,CAACJ,SAAS,CAAC,CAC/C3B,2BAA2B,CAACgC,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACE,WAAW,EAAGL,QAAS,CAAC,CAAC,CAAC,CAC7E,CAAC,IAAM,CACL7B,2BAA2B,CAACgC,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACE,WAAW,EAAGjC,cAAe,CAAC,CAAC,CAAC,CACnF,CACF,CAAE,MAAOmB,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,4CAA4C,CAAEA,KAAK,CAAC,CAClEpB,2BAA2B,CAACgC,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACE,WAAW,EAAGjC,cAAe,CAAC,CAAC,CAAC,CACnF,CACF,CAAC,CAAE,EAAE,CAAC,CAENzD,SAAS,CAAC,IAAM,CACd,GAAIyC,aAAa,EAAIA,aAAa,CAACgC,OAAO,CAAE,CAC1CO,wBAAwB,CAACvC,aAAa,CAACgC,OAAO,CAAC,CACjD,CAAC,IAAM,CACLC,OAAO,CAACE,KAAK,CAAC,2BAA2B,CAAC,CAC5C,CACF,CAAC,CAAE,CAACnC,aAAa,CAAEuC,wBAAwB,CAAC,CAAC,CAE7ChF,SAAS,CAAC,IAAM,CACd,KAAM,CAAA2F,qBAAqB,CAAG,KAAAA,CAAA,GAAY,CACxC,GAAI,CACF,KAAM,CAAAvB,QAAQ,CAAG,KAAM,CAAAjE,KAAK,CAACkE,GAAG,CAAC,6BAA6B,CAAC,CAC/D,KAAM,CAAAuB,WAAW,CAAGxB,QAAQ,CAACI,IAAI,CAACqB,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,GAAI,CAAAC,IAAI,CAACD,CAAC,CAACE,SAAS,CAAC,CAAG,GAAI,CAAAD,IAAI,CAACF,CAAC,CAACG,SAAS,CAAC,CAAC,CAC/FrE,QAAQ,CAACgE,WAAW,CAAC,CAErB,KAAM,CAAAM,QAAQ,CAAG,GAAI,CAAAC,GAAG,CAAC,CAAC,CAC1B,KAAM,CAAAC,YAAY,CAAG,GAAI,CAAAD,GAAG,CAAC,CAAC,CAE9BP,WAAW,CAACS,OAAO,CAACC,IAAI,EAAI,CAC1B,GAAIA,IAAI,CAAC7B,OAAO,CAAE,CAChByB,QAAQ,CAACK,GAAG,CAACD,IAAI,CAAC7B,OAAO,CAAC,CAC5B,CACA,GAAI6B,IAAI,CAACZ,WAAW,CAAE,CACpBU,YAAY,CAACG,GAAG,CAACD,IAAI,CAACZ,WAAW,CAAC,CACpC,CACF,CAAC,CAAC,CAEFQ,QAAQ,CAACG,OAAO,CAAC5B,OAAO,EAAIO,wBAAwB,CAACP,OAAO,CAAC,CAAC,CAC9D2B,YAAY,CAACC,OAAO,CAACX,WAAW,EAAID,4BAA4B,CAACC,WAAW,CAAC,CAAC,CAChF,CAAE,MAAOd,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAEDe,qBAAqB,CAAC,CAAC,CACzB,CAAC,CAAE,CAACX,wBAAwB,CAAES,4BAA4B,CAAC,CAAC,CAE5D,KAAM,CAAAe,qBAAqB,CAAIC,CAAC,EAAK,CACnC,KAAM,CAAAC,OAAO,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAC9BlF,iBAAiB,CAACgF,OAAO,CAAC,CAC1B/C,kBAAkB,CAAC+C,OAAO,CAACG,MAAM,CAAG,CAAC,EAAI9E,YAAY,GAAK,IAAI,CAAC,CACjE,CAAC,CAED,KAAM,CAAA+E,gBAAgB,CAAIC,KAAK,EAAK,CAClC,KAAM,CAAAC,IAAI,CAAGD,KAAK,CAACJ,MAAM,CAACM,KAAK,CAAC,CAAC,CAAC,CAClC,GAAID,IAAI,CAAE,CACR,KAAM,CAAAE,MAAM,CAAG,GAAI,CAAAC,UAAU,CAAC,CAAC,CAC/BD,MAAM,CAACE,SAAS,CAAG,IAAM,CACvBpF,eAAe,CAACkF,MAAM,CAACG,MAAM,CAAC,CAC9B1D,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CACDuD,MAAM,CAACI,aAAa,CAACN,IAAI,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAAO,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI,EAAE,yBAAyB,EAAI,CAAAC,MAAM,CAAC,CAAE,OAC5C,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAD,MAAM,CAACE,uBAAuB,CAAC,CAAC,CACxDD,WAAW,CAACE,UAAU,CAAG,KAAK,CAC9BF,WAAW,CAACG,cAAc,CAAG,KAAK,CAClCH,WAAW,CAACI,IAAI,CAAG,OAAO,CAC1BJ,WAAW,CAACK,QAAQ,CAAIf,KAAK,EAAK,CAChC,KAAM,CAAAgB,UAAU,CAAGhB,KAAK,CAACiB,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACD,UAAU,CACjDrG,iBAAiB,CAAEuG,WAAW,EAAKA,WAAW,CAAG,GAAG,CAAGF,UAAU,CAAC,CACpE,CAAC,CACDN,WAAW,CAACS,OAAO,CAAInB,KAAK,EAAK,CAC/BrC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEoC,KAAK,CAACnC,KAAK,CAAC,CACvD,CAAC,CACD6C,WAAW,CAACU,KAAK,CAAC,CAAC,CACrB,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAG,KAAO,CAAA3B,CAAC,EAAK,CACpCA,CAAC,CAAC4B,cAAc,CAAC,CAAC,CAElB,GAAI,CAAC5G,cAAc,EAAI,CAACM,YAAY,CAAE,CACpCuG,KAAK,CAAC,4DAA4D,CAAC,CACnE,OACF,CAEA,GAAI,CAAC7F,aAAa,CAAE,CAClB6F,KAAK,CAAC,wBAAwB,CAAC,CAC/B,OACF,CAEA,KAAM,CAAAC,OAAO,CAAG,CACd7B,OAAO,CAAEjF,cAAc,CACvB+G,KAAK,CAAEzG,YAAY,CACnB0C,OAAO,CAAEhC,aAAa,CAACgC,OAAO,CAC9BgE,QAAQ,CAAEhG,aAAa,CAACgG,QAAQ,CAChCC,QAAQ,CAAEjG,aAAa,CAACiG,QAAQ,CAChCC,UAAU,CAAE,KAAK,CACjBC,KAAK,CAAE,CAAC,CACRC,QAAQ,CAAE,CACZ,CAAC,CAED,GAAI,CACF,KAAM,CAAAzE,QAAQ,CAAG,KAAM,CAAAjE,KAAK,CAACmG,IAAI,CAAC,iCAAiC,CAAEiC,OAAO,CAAE,CAC5EO,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEFlH,QAAQ,CAACmH,SAAS,EAAI,CAAC3E,QAAQ,CAACI,IAAI,CAAE,GAAGuE,SAAS,CAAC,CAAC,CACpDrH,iBAAiB,CAAC,EAAE,CAAC,CACrBI,eAAe,CAAC,IAAI,CAAC,CACrBE,eAAe,CAAC,IAAI,CAAC,CACrB2B,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAE,MAAOiB,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC7C,CACF,CAAC,CAED,KAAM,CAAAoE,UAAU,CAAG,KAAO,CAAAC,MAAM,EAAK,CACnC,GAAI,CAACxG,aAAa,EAAI,CAACE,iBAAiB,CAAE,CACxC2F,KAAK,CAAC,8BAA8B,CAAC,CACrC,OACF,CACA,GAAI,CACF,KAAM,CAAAlE,QAAQ,CAAG,KAAM,CAAAjE,KAAK,CAACmG,IAAI,gCAAAhC,MAAA,CAAgC2E,MAAM,UAAS,CAAC,CAAC,CAAE,CAClFC,MAAM,CAAE,CACNC,MAAM,CAAE1G,aAAa,CAAGA,aAAa,CAACgC,OAAO,CAAG9B,iBAAiB,CAAC+C,WAAW,CAC7E0D,OAAO,CAAE,CAAC,CAAC3G,aACb,CACF,CAAC,CAAC,CACF,KAAM,CAAA4G,WAAW,CAAGjF,QAAQ,CAACI,IAAI,CACjC5C,QAAQ,CAACD,KAAK,CAAC2H,GAAG,CAAChD,IAAI,EACrBA,IAAI,CAAC2C,MAAM,GAAKA,MAAM,CAAGI,WAAW,CAAG/C,IACzC,CAAC,CAAC,CACJ,CAAE,MAAO1B,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC5C,CACF,CAAC,CAED,KAAM,CAAA2E,aAAa,CAAG,KAAO,CAAAN,MAAM,EAAK,CACtC,GAAI,CAACxG,aAAa,EAAI,CAACE,iBAAiB,CAAE,CACxC2F,KAAK,CAAC,iCAAiC,CAAC,CACxC,OACF,CACA,GAAI,CACF,KAAM,CAAAlE,QAAQ,CAAG,KAAM,CAAAjE,KAAK,CAACmG,IAAI,gCAAAhC,MAAA,CAAgC2E,MAAM,aAAY,CAAC,CAAC,CAAE,CACrFC,MAAM,CAAE,CACNC,MAAM,CAAE1G,aAAa,CAAGA,aAAa,CAACgC,OAAO,CAAG9B,iBAAiB,CAAC+C,WAAW,CAC7E0D,OAAO,CAAE,CAAC,CAAC3G,aACb,CACF,CAAC,CAAC,CACF,KAAM,CAAA4G,WAAW,CAAGjF,QAAQ,CAACI,IAAI,CACjC5C,QAAQ,CAACD,KAAK,CAAC2H,GAAG,CAAChD,IAAI,EACrBA,IAAI,CAAC2C,MAAM,GAAKA,MAAM,CAAGI,WAAW,CAAG/C,IACzC,CAAC,CAAC,CACJ,CAAE,MAAO1B,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAED,KAAM,CAAA4E,kBAAkB,CAAG,KAAO,CAAAP,MAAM,EAAK,CAC3C/G,gBAAgB,CAAC+G,MAAM,CAAC,CACxB,GAAI,CACF,KAAM,CAACQ,gBAAgB,CAAEC,YAAY,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CACzDzJ,KAAK,CAACkE,GAAG,mCAAAC,MAAA,CAAmC2E,MAAM,CAAE,CAAC,CACrD9I,KAAK,CAACkE,GAAG,gCAAAC,MAAA,CAAgC2E,MAAM,CAAE,CAAC,CACnD,CAAC,CACF,KAAM,CAAAY,cAAc,CAAGJ,gBAAgB,CAACjF,IAAI,CACzCqB,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,GAAI,CAAAC,IAAI,CAACD,CAAC,CAACE,SAAS,CAAC,CAAG,GAAI,CAAAD,IAAI,CAACF,CAAC,CAACG,SAAS,CAAC,CAAC,CAC7DqD,GAAG,CAACQ,OAAO,GAAK,CACf,GAAGA,OAAO,CACVC,YAAY,CAAEpJ,MAAM,CAACmJ,OAAO,CAAC7D,SAAS,CAAC,CAAC+D,OAAO,CAAC,CAClD,CAAC,CAAC,CAAC,CACL1H,WAAW,CAACuH,cAAc,CAAC,CAC3BzH,mBAAmB,CAACsH,YAAY,CAAClF,IAAI,CAACC,OAAO,CAAC,CAChD,CAAE,MAAOG,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,0CAA0C,CAAEA,KAAK,CAAC,CAClE,CACApC,sBAAsB,CAAC,IAAI,CAAC,CAC9B,CAAC,CAED,KAAM,CAAAyH,mBAAmB,CAAGA,CAAA,GAAM,CAChCzH,sBAAsB,CAAC,KAAK,CAAC,CAC7BN,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,CAED,KAAM,CAAAgI,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAIrH,UAAU,CAACsH,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,OAE9B,KAAM,CAAAL,OAAO,CAAG,CACdpD,OAAO,CAAE7D,UAAU,CACnBoG,MAAM,CAAEhH,aAAa,CACrBwC,OAAO,CAAEhC,aAAa,CAACgC,OAAO,CAC9BgE,QAAQ,CAAEhG,aAAa,CAACgG,QAAQ,CAChCC,QAAQ,CAAEjG,aAAa,CAACiG,QAC1B,CAAC,CAED,GAAI,CACF,KAAM,CAAAtE,QAAQ,CAAG,KAAM,CAAAjE,KAAK,CAACmG,IAAI,CAAC,oCAAoC,CAAEwD,OAAO,CAAC,CAChF,KAAM,CAAAM,0BAA0B,CAAG,CACjC,GAAGhG,QAAQ,CAACI,IAAI,CAChBuF,YAAY,CAAEpJ,MAAM,CAACyD,QAAQ,CAACI,IAAI,CAACyB,SAAS,CAAC,CAAC+D,OAAO,CAAC,CACxD,CAAC,CACD1H,WAAW,CAAC+H,YAAY,EAAI,CAACD,0BAA0B,CAAE,GAAGC,YAAY,CAAC,CAAC,CAC1EvH,aAAa,CAAC,EAAE,CAAC,CACnB,CAAE,MAAO8B,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAED,KAAM,CAAA0F,gBAAgB,CAAIrB,MAAM,EAAK,CACnC,GAAI,CAACxG,aAAa,CAAE,CAClB6F,KAAK,CAAC,gCAAgC,CAAC,CACvC,OACF,CACAlF,eAAe,CAAC6F,MAAM,CAAC,CACvBjG,yBAAyB,CAAC,IAAI,CAAC,CACjC,CAAC,CAED,KAAM,CAAAuH,mBAAmB,CAAGA,CAACC,SAAS,CAAEC,cAAc,GAAK,CACzD,GAAI,CAAChI,aAAa,CAAE,CAClB6F,KAAK,CAAC,mCAAmC,CAAC,CAC1C,OACF,CACA,GAAI7F,aAAa,CAACgC,OAAO,GAAKgG,cAAc,EAAIhI,aAAa,CAACgC,OAAO,GAAKtC,gBAAgB,CAAE,CAC1FiB,eAAe,CAACoH,SAAS,CAAC,CAC1BtH,4BAA4B,CAAC,IAAI,CAAC,CACpC,CAAC,IAAM,CACLoF,KAAK,CAAC,mDAAmD,CAAC,CAC5D,CACF,CAAC,CAED,KAAM,CAAAoC,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,KAAM,CAAAvK,KAAK,CAACwK,MAAM,gCAAArG,MAAA,CAAgCnB,YAAY,CAAE,CAAC,CACjEvB,QAAQ,CAACD,KAAK,CAACiJ,MAAM,CAACtE,IAAI,EAAIA,IAAI,CAAC2C,MAAM,GAAK9F,YAAY,CAAC,CAAC,CAC5DH,yBAAyB,CAAC,KAAK,CAAC,CAClC,CAAE,MAAO4B,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAED,KAAM,CAAAiG,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAI,CACF,KAAM,CAAA1K,KAAK,CAACwK,MAAM,mCAAArG,MAAA,CAAmCnB,YAAY,EAAI,CACnE+F,MAAM,CAAE,CACNzE,OAAO,CAAEhC,aAAa,CAACgC,OACzB,CACF,CAAC,CAAC,CACFnC,WAAW,CAACD,QAAQ,CAACuI,MAAM,CAACd,OAAO,EAAIA,OAAO,CAACU,SAAS,GAAKrH,YAAY,CAAC,CAAC,CAC3ED,4BAA4B,CAAC,KAAK,CAAC,CACrC,CAAE,MAAO0B,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/C0D,KAAK,CAAC,wDAAwD,CAAC,CACjE,CACF,CAAC,CAED,KAAM,CAAAwC,eAAe,CAAI7E,SAAS,EAAK,CACrC,KAAM,CAAA8E,UAAU,CAAGpK,MAAM,CAACsF,SAAS,CAAC,CACpC,MAAO,CAAA8E,UAAU,CAACC,MAAM,CAAC,gCAAgC,CAAC,CAC5D,CAAC,CAED,KAAM,CAAAC,eAAe,CAAIhF,SAAS,EAAK,CACrC,MAAO,CAAAtF,MAAM,CAACsF,SAAS,CAAC,CAAC+D,OAAO,CAAC,CAAC,CACpC,CAAC,CAED,KAAM,CAAAkB,eAAe,CAAGA,CAAA,GAAM,CAC5BxJ,iBAAiB,CAAC,EAAE,CAAC,CACrBM,eAAe,CAAC,IAAI,CAAC,CACrB2B,kBAAkB,CAAC,KAAK,CAAC,CACzB,GAAIC,YAAY,CAACuH,OAAO,CAAE,CACxBvH,YAAY,CAACuH,OAAO,CAACvE,KAAK,CAAG,EAAE,CACjC,CACF,CAAC,CAED,mBACE5F,KAAA,QAAKoK,SAAS,CAAC,QAAQ,CAAAhK,QAAA,eACrBN,IAAA,CAACF,QAAQ,GAAE,CAAC,cACZE,IAAA,MAAGsK,SAAS,CAAC,UAAU,CAAAhK,QAAA,CAAC,SAAO,CAAG,CAAC,cAEnCJ,KAAA,QAAKoK,SAAS,CAAC,iBAAiB,CAAAhK,QAAA,eAC9BN,IAAA,QAAKsK,SAAS,CAAC,gBAAgB,CAAAhK,QAAA,cAC7BJ,KAAA,QAAKoK,SAAS,CAAC,WAAW,CAAAhK,QAAA,eACxBJ,KAAA,SAAMqK,QAAQ,CAAEjD,gBAAiB,CAAAhH,QAAA,eAC/BJ,KAAA,QAAKoK,SAAS,CAAC,iBAAiB,CAAAhK,QAAA,eAC9BN,IAAA,UACEwK,IAAI,CAAC,MAAM,CACXF,SAAS,CAAC,YAAY,CACtBxE,KAAK,CAAEnF,cAAe,CACtB8J,QAAQ,CAAE/E,qBAAsB,CAChCgF,WAAW,CAAC,wCAAwC,CACrD,CAAC,CACD9H,eAAe,eACd5C,IAAA,WAAQwK,IAAI,CAAC,QAAQ,CAACF,SAAS,CAAC,cAAc,CAACK,OAAO,CAAEP,eAAgB,CAAA9J,QAAA,CAAC,MAEzE,CAAQ,CACT,EACE,CAAC,cACNJ,KAAA,QAAKoK,SAAS,CAAC,mBAAmB,CAAAhK,QAAA,eAChCJ,KAAA,QAAKoK,SAAS,CAAC,yBAAyB,CAAAhK,QAAA,eACtCN,IAAA,UAAO4K,OAAO,CAAC,aAAa,CAAAtK,QAAA,cAC1BN,IAAA,QAAKsK,SAAS,CAAC,cAAc,CAACO,GAAG,CAAC,EAAE,CAACC,GAAG,CAAC,cAAc,CAAE,CAAC,CACrD,CAAC,cACR9K,IAAA,UACE+K,GAAG,CAAEjI,YAAa,CAClBkI,EAAE,CAAC,aAAa,CAChBR,IAAI,CAAC,MAAM,CACXF,SAAS,CAAC,YAAY,CACtBW,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAC3BT,QAAQ,CAAEzE,gBAAiB,CAC3B2E,OAAO,CAAGhF,CAAC,EAAK,CAAEA,CAAC,CAACE,MAAM,CAACC,KAAK,CAAG,IAAI,CAAC,CAAE,CAC3C,CAAC,cACF9F,IAAA,QACEsK,SAAS,CAAC,UAAU,CACpBO,GAAG,CAAC,KAAK,CACTC,GAAG,CAAC,UAAU,CACdH,OAAO,CAAElE,cAAe,CACxBwE,KAAK,CAAE,CAAEE,MAAM,CAAE,SAAU,CAAE,CAC9B,CAAC,EACC,CAAC,cACNnL,IAAA,CAACT,MAAM,EACLiL,IAAI,CAAC,QAAQ,CACbF,SAAS,CAAC,aAAa,CACvBc,OAAO,CAAC,WAAW,CACnBC,EAAE,CAAE,CACFC,YAAY,CAAE,MAAM,CACpBC,KAAK,CAAE,EAAE,CACTC,MAAM,CAAE,EAAE,CACVC,eAAe,CAAE,SAAS,CAC1B,SAAS,CAAE,CAAEA,eAAe,CAAE,SAAU,CAC1C,CAAE,CAAAnL,QAAA,CACH,MAED,CAAQ,CAAC,EACN,CAAC,EACF,CAAC,CACNW,YAAY,eACXjB,IAAA,QAAKsK,SAAS,CAAC,eAAe,CAAAhK,QAAA,cAC5BN,IAAA,QAAK8K,GAAG,CAAE7J,YAAa,CAAC4J,GAAG,CAAC,SAAS,CAACI,KAAK,CAAE,CAAEM,KAAK,CAAE,OAAO,CAAEC,MAAM,CAAE,OAAQ,CAAE,CAAE,CAAC,CACjF,CACN,EACE,CAAC,CACH,CAAC,cAENxL,IAAA,QAAKsK,SAAS,CAAC,WAAW,CAAAhK,QAAA,CACvBO,KAAK,CAAC2H,GAAG,CAAEhD,IAAI,eACdxF,IAAA,QAAuBsK,SAAS,CAAC,WAAW,CAAAhK,QAAA,cAC1CJ,KAAA,QAAKoK,SAAS,CAAC,gBAAgB,CAAAhK,QAAA,eAC7BN,IAAA,QAAKsK,SAAS,CAAC,gBAAgB,CAAAhK,QAAA,cAC7BN,IAAA,QACE8K,GAAG,CACDtF,IAAI,CAAC7B,OAAO,CACRpB,oBAAoB,CAACiD,IAAI,CAAC7B,OAAO,CAAC,EAAIhB,cAAc,CACpDF,wBAAwB,CAAC+C,IAAI,CAACZ,WAAW,CAAC,EAAIjC,cACnD,CACDkI,GAAG,CAAC,gBAAgB,CACpBP,SAAS,CAAC,WAAW,CACtB,CAAC,CACC,CAAC,cACNpK,KAAA,QAAKoK,SAAS,CAAC,gBAAgB,CAAAhK,QAAA,eAC7BJ,KAAA,OAAAI,QAAA,EAAKkF,IAAI,CAACmC,QAAQ,CAAC,IAAE,CAACnC,IAAI,CAACoC,QAAQ,CAAC,GAAC,EAAI,CAAC,CACzCjG,aAAa,EAAIA,aAAa,CAACgC,OAAO,GAAK6B,IAAI,CAAC7B,OAAO,eACtD3D,IAAA,QACE8K,GAAG,CAAC,aAAa,CACjBD,GAAG,CAAC,QAAQ,CACZP,SAAS,CAAC,aAAa,CACvBK,OAAO,CAAEA,CAAA,GAAMnB,gBAAgB,CAAChE,IAAI,CAAC2C,MAAM,CAAE,CAC7C8C,KAAK,CAAE,CAAEE,MAAM,CAAE,SAAS,CAAEI,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,MAAM,CAAEE,UAAU,CAAE,MAAO,CAAE,CACjF,CACF,EACE,CAAC,cACNxL,KAAA,QAAKoK,SAAS,CAAC,WAAW,CAAAhK,QAAA,eACxBN,IAAA,SAAMsK,SAAS,CAAC,gBAAgB,CAAAhK,QAAA,CAAE0J,eAAe,CAACxE,IAAI,CAACL,SAAS,CAAC,CAAO,CAAC,cACzEnF,IAAA,QAAK,CAAC,cACNA,IAAA,SAAMsK,SAAS,CAAC,eAAe,CAAAhK,QAAA,CAAE6J,eAAe,CAAC3E,IAAI,CAACL,SAAS,CAAC,CAAO,CAAC,EACrE,CAAC,cACNjF,KAAA,QAAKoK,SAAS,CAAC,eAAe,CAAAhK,QAAA,eAC5BN,IAAA,MAAAM,QAAA,CAAIkF,IAAI,CAACI,OAAO,CAAI,CAAC,CACpBJ,IAAI,CAACkC,KAAK,eACT1H,IAAA,QACEsK,SAAS,CAAC,YAAY,CACtBO,GAAG,CAAC,MAAM,CACVC,GAAG,CAAEtF,IAAI,CAACkC,KAAM,CAChBuD,KAAK,CAAE,CAAEU,QAAQ,CAAE,MAAM,CAAEH,MAAM,CAAE,MAAO,CAAE,CAC7C,CACF,EACE,CAAC,cACNxL,IAAA,QAAKsK,SAAS,CAAC,aAAa,CAAE,CAAC,cAC/BpK,KAAA,QAAKoK,SAAS,CAAC,gBAAgB,CAAAhK,QAAA,eAC7BJ,KAAA,QAAKoK,SAAS,CAAC,cAAc,CAAAhK,QAAA,eAC3BJ,KAAA,WACEyK,OAAO,CAAEA,CAAA,GAAMzC,UAAU,CAAC1C,IAAI,CAAC2C,MAAM,CAAE,CACvCmC,SAAS,gBAAA9G,MAAA,CAAiBgC,IAAI,CAACoG,OAAO,EAAIpG,IAAI,CAACoG,OAAO,CAACC,QAAQ,CAAClK,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEgC,OAAO,CAAC,CAAG,QAAQ,CAAG,EAAE,CAAG,CAAArD,QAAA,eAE1GN,IAAA,QAAK8K,GAAG,CAAC,WAAW,CAACD,GAAG,CAAC,WAAW,CAAE,CAAC,IAAC,CAACrF,IAAI,CAACsC,KAAK,EAC7C,CAAC,cACT5H,KAAA,WACEyK,OAAO,CAAEA,CAAA,GAAMlC,aAAa,CAACjD,IAAI,CAAC2C,MAAM,CAAE,CAC1CmC,SAAS,mBAAA9G,MAAA,CAAoBgC,IAAI,CAACsG,UAAU,EAAItG,IAAI,CAACsG,UAAU,CAACD,QAAQ,CAAClK,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEgC,OAAO,CAAC,CAAG,QAAQ,CAAG,EAAE,CAAG,CAAArD,QAAA,eAEnHN,IAAA,QAAK8K,GAAG,CAAC,aAAa,CAACD,GAAG,CAAC,aAAa,CAAE,CAAC,IAAC,CAACrF,IAAI,CAACuC,QAAQ,EACpD,CAAC,EACN,CAAC,cACN/H,IAAA,QAAKsK,SAAS,CAAC,iBAAiB,CAAAhK,QAAA,cAC9BN,IAAA,WAAQsK,SAAS,CAAC,gBAAgB,CAACK,OAAO,CAAEA,CAAA,GAAMjC,kBAAkB,CAAClD,IAAI,CAAC2C,MAAM,CAAE,CAAA7H,QAAA,CAAC,SAAO,CAAQ,CAAC,CAChG,CAAC,EACH,CAAC,EACH,CAAC,EA7DEkF,IAAI,CAAC2C,MA8DV,CACN,CAAC,CACC,CAAC,EACH,CAAC,cAENjI,KAAA,CAACV,MAAM,EAACuM,IAAI,CAAEtK,mBAAoB,CAACuK,OAAO,CAAE7C,mBAAoB,CAAA7I,QAAA,eAC9DJ,KAAA,CAACT,WAAW,EAAAa,QAAA,EAAC,UAEX,cAAAN,IAAA,QACE8K,GAAG,CAAC,WAAW,CACfD,GAAG,CAAC,OAAO,CACXP,SAAS,CAAC,WAAW,CACrBK,OAAO,CAAExB,mBAAoB,CAC9B,CAAC,EACS,CAAC,cACdnJ,IAAA,CAACN,aAAa,EAAAY,QAAA,CACXiB,QAAQ,CAACiH,GAAG,CAAEQ,OAAO,eACpB9I,KAAA,QAA6BoK,SAAS,CAAC,SAAS,CAAAhK,QAAA,eAC9CJ,KAAA,QAAKoK,SAAS,CAAC,gBAAgB,CAAAhK,QAAA,eAC7BJ,KAAA,QAAKoK,SAAS,CAAC,sBAAsB,CAAAhK,QAAA,eACnCJ,KAAA,SAAMoK,SAAS,CAAC,YAAY,CAAAhK,QAAA,EACzB0I,OAAO,CAACrB,QAAQ,CAAC,IAAE,CAACqB,OAAO,CAACpB,QAAQ,CAAC,GACxC,EAAM,CAAC,CACLjG,aAAa,GAAKA,aAAa,CAACgC,OAAO,GAAKqF,OAAO,CAACrF,OAAO,EAAIhC,aAAa,CAACgC,OAAO,GAAKtC,gBAAgB,CAAC,eAC1GrB,IAAA,QACE8K,GAAG,CAAC,aAAa,CACjBD,GAAG,CAAC,QAAQ,CACZP,SAAS,CAAC,aAAa,CACvBK,OAAO,CAAEA,CAAA,GAAMlB,mBAAmB,CAACT,OAAO,CAACU,SAAS,CAAEV,OAAO,CAACrF,OAAO,CAAE,CACxE,CACF,EACE,CAAC,cACNzD,KAAA,QAAKoK,SAAS,CAAC,qBAAqB,CAAAhK,QAAA,eAClCN,IAAA,SAAMsK,SAAS,CAAC,gBAAgB,CAAAhK,QAAA,CAC7B0J,eAAe,CAAChB,OAAO,CAAC7D,SAAS,CAAC,CAC/B,CAAC,cACPnF,IAAA,SAAMsK,SAAS,CAAC,eAAe,CAAAhK,QAAA,CAC5B0I,OAAO,CAACC,YAAY,CACjB,CAAC,EACJ,CAAC,EACH,CAAC,cACNjJ,IAAA,MAAAM,QAAA,CAAI0I,OAAO,CAACpD,OAAO,CAAI,CAAC,GAxBhBoD,OAAO,CAACU,SAyBb,CACN,CAAC,CACW,CAAC,cAChB1J,IAAA,CAACL,aAAa,EAAAW,QAAA,cACZJ,KAAA,QAAKoK,SAAS,CAAC,aAAa,CAACW,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEK,KAAK,CAAE,MAAM,CAAEU,OAAO,CAAE,MAAO,CAAE,CAAA3L,QAAA,eACtFN,IAAA,UACEwK,IAAI,CAAC,MAAM,CACX1E,KAAK,CAAE/D,UAAW,CAClB0I,QAAQ,CAAG9E,CAAC,EAAK3D,aAAa,CAAC2D,CAAC,CAACE,MAAM,CAACC,KAAK,CAAE,CAC/C4E,WAAW,CAAC,kBAAkB,CAC9BO,KAAK,CAAE,CACLiB,QAAQ,CAAE,CAAC,CACXC,WAAW,CAAE,MAAM,CACnBF,OAAO,CAAE,KAAK,CACdG,MAAM,CAAE,gBAAgB,CACxBd,YAAY,CAAE,KAChB,CAAE,CACH,CAAC,cACFtL,IAAA,CAACT,MAAM,EACLoL,OAAO,CAAEvB,gBAAiB,CAC1BgC,OAAO,CAAC,WAAW,CACnBC,EAAE,CAAE,CACFI,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OAAO,CACd,SAAS,CAAE,CACTZ,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OACT,CAAC,CACDC,UAAU,CAAE,eACd,CAAE,CAAAhM,QAAA,CACH,SAED,CAAQ,CAAC,EACN,CAAC,CACO,CAAC,EACV,CAAC,cAETJ,KAAA,CAACV,MAAM,EAACuM,IAAI,CAAE9J,sBAAuB,CAAC+J,OAAO,CAAEA,CAAA,GAAM9J,yBAAyB,CAAC,KAAK,CAAE,CAAA5B,QAAA,eACpFN,IAAA,CAACP,WAAW,EAAAa,QAAA,CAAC,gBAAc,CAAa,CAAC,cACzCN,IAAA,CAACN,aAAa,EAAAY,QAAA,CAAC,4CAEf,CAAe,CAAC,cAChBJ,KAAA,CAACP,aAAa,EAAC2K,SAAS,CAAC,uBAAuB,CAAAhK,QAAA,eAC9CN,IAAA,CAACT,MAAM,EAACoL,OAAO,CAAEA,CAAA,GAAMzI,yBAAyB,CAAC,KAAK,CAAE,CAACoI,SAAS,CAAC,eAAe,CAAAhK,QAAA,CAAC,QAAM,CAAQ,CAAC,cAClGN,IAAA,CAACT,MAAM,EAACoL,OAAO,CAAEf,iBAAkB,CAACU,SAAS,CAAC,eAAe,CAAAhK,QAAA,CAAC,QAAM,CAAQ,CAAC,EAChE,CAAC,EACV,CAAC,cAETJ,KAAA,CAACV,MAAM,EAACuM,IAAI,CAAE5J,yBAA0B,CAAC6J,OAAO,CAAEA,CAAA,GAAM5J,4BAA4B,CAAC,KAAK,CAAE,CAAA9B,QAAA,eAC1FN,IAAA,CAACP,WAAW,EAAAa,QAAA,CAAC,gBAAc,CAAa,CAAC,cACzCN,IAAA,CAACN,aAAa,EAAAY,QAAA,CAAC,+CAEf,CAAe,CAAC,cAChBJ,KAAA,CAACP,aAAa,EAAC2K,SAAS,CAAC,uBAAuB,CAAAhK,QAAA,eAC9CN,IAAA,CAACT,MAAM,EAACoL,OAAO,CAAEA,CAAA,GAAMvI,4BAA4B,CAAC,KAAK,CAAE,CAACkI,SAAS,CAAC,eAAe,CAAAhK,QAAA,CAAC,QAAM,CAAQ,CAAC,cACrGN,IAAA,CAACT,MAAM,EAACoL,OAAO,CAAEZ,oBAAqB,CAACO,SAAS,CAAC,eAAe,CAAAhK,QAAA,CAAC,QAAM,CAAQ,CAAC,EACnE,CAAC,EACV,CAAC,EACN,CAAC,CAEV,CAAC,CAED,cAAe,CAAAC,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}